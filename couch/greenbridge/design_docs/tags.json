{
   "_id": "_design/tags",
   "language": "javascript",
   "views": {
       "by_tag": {
           "map": "function(doc) {\n  if(doc.type == 'tag') {\n     emit(doc.tag, doc);\n  }\n}"
       },
       "by_conversation": {
           "map": "function(doc) {\n  if(doc.type == 'tag') {\n     emit(doc.conversation, doc);\n  }\n}"
       },
       "by_conversation_ordered": {
           "map": "function(doc) {\n  if(doc.type == 'tag') {\n     emit([doc.conversation,doc.mediaOffset], doc);\n  }\n}"
       },
       "by_tag_grouped": {
           "map": "function(doc) {\n  if(doc.type == 'tag') {\n      emit(doc.tag, 1);\n}}",
           "reduce": "function(keys, values) {\n  return sum(values);\n}"
       }
   }
}